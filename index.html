<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>点亮星空 - 发送你的祝福</title>
    <meta name="description" content="一个交互式的星空动画页面，可以点亮星星并留下祝福">
    <meta name="keywords" content="星空, 动画, 祝福, 互动, JavaScript">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(to bottom, #0a0a2a, #1a1a40, #0a0a2a); color: #fff; min-height: 100vh; overflow-x: hidden; position: relative; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; position: relative; z-index: 2; }
        header { text-align: center; padding: 30px 0; margin-bottom: 20px; }
        h1 { font-size: 3.5rem; margin-bottom: 10px; background: linear-gradient(90deg, #ffd700, #ffed4e, #ffd700); -webkit-background-clip: text; background-clip: text; color: transparent; text-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }
        .subtitle { font-size: 1.2rem; color: #a0a0ff; margin-bottom: 20px; max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.6; }
        .instructions { background: rgba(0, 0, 30, 0.6); border-radius: 15px; padding: 20px; margin: 30px auto; max-width: 800px; border: 1px solid rgba(64, 64, 128, 0.5); box-shadow: 0 0 20px rgba(64, 64, 255, 0.2); }
        .instructions h2 { color: #6ee7ff; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .instructions ol { margin-left: 20px; line-height: 1.8; }
        .instructions li { margin-bottom: 10px; color: #ccc; }
        .instructions li strong { color: #fff; }
        .content { display: flex; flex-wrap: wrap; gap: 30px; margin-top: 40px; }
        .stars-container { flex: 1; min-width: 300px; height: 600px; position: relative; border-radius: 15px; overflow: hidden; background: rgba(0, 0, 20, 0.5); border: 1px solid rgba(64, 64, 128, 0.3); box-shadow: 0 0 30px rgba(0, 0, 50, 0.5); }
        .star { position: absolute; width: 4px; height: 4px; background-color: #fff; border-radius: 50%; box-shadow: 0 0 5px 1px rgba(255, 255, 255, 0.8); cursor: pointer; transition: all 0.3s ease; }
        .star:hover { transform: scale(1.5); box-shadow: 0 0 10px 2px rgba(255, 255, 255, 1); }
        .star.lit { background-color: #ffed4e; box-shadow: 0 0 15px 5px rgba(255, 237, 78, 0.9); animation: twinkle 2s infinite alternate; }
        @keyframes twinkle { 0% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.3); opacity: 1; } }
        .sidebar { flex: 1; min-width: 300px; background: rgba(0, 0, 30, 0.6); border-radius: 15px; padding: 25px; border: 1px solid rgba(64, 64, 128, 0.5); box-shadow: 0 0 20px rgba(64, 64, 255, 0.2); }
        .form-container { display: flex; flex-direction: column; gap: 20px; }
        .form-group { display: flex; flex-direction: column; gap: 8px; }
        label { color: #6ee7ff; font-weight: 600; }
        input, textarea { padding: 12px 15px; border-radius: 8px; border: 1px solid rgba(64, 64, 128, 0.7); background: rgba(0, 0, 20, 0.8); color: #fff; font-size: 1rem; transition: all 0.3s; }
        input:focus, textarea:focus { outline: none; border-color: #6ee7ff; box-shadow: 0 0 10px rgba(110, 231, 255, 0.5); }
        textarea { min-height: 100px; resize: vertical; }
        .avatar-container { display: flex; flex-direction: column; align-items: center; gap: 15px; margin: 15px 0; }
        .avatar-preview { width: 120px; height: 120px; border-radius: 50%; overflow: hidden; border: 3px solid #6ee7ff; box-shadow: 0 0 15px rgba(110, 231, 255, 0.5); background: rgba(0, 0, 20, 0.8); display: flex; align-items: center; justify-content: center; font-size: 3rem; color: #6ee7ff; }
        .avatar-preview img { width: 100%; height: 100%; object-fit: cover; }
        .btn { padding: 14px 20px; border-radius: 8px; border: none; background: linear-gradient(90deg, #6ee7ff, #3b82f6); color: white; font-weight: 600; font-size: 1rem; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4); }
        .btn:active { transform: translateY(0); }
        .lit-stars-counter { text-align: center; margin-top: 25px; padding: 15px; background: rgba(0, 0, 40, 0.7); border-radius: 10px; border: 1px solid rgba(64, 64, 128, 0.5); }
        .lit-stars-counter h3 { color: #ffed4e; margin-bottom: 10px; }
        .counter { font-size: 2.5rem; font-weight: bold; color: #ffed4e; text-shadow: 0 0 10px rgba(255, 237, 78, 0.5); }
        .star-message { position: absolute; background: rgba(10, 10, 40, 0.95); border-radius: 10px; padding: 15px; max-width: 250px; border: 2px solid #ffed4e; box-shadow: 0 0 20px rgba(255, 237, 78, 0.5); z-index: 5; opacity: 0; transform: scale(0); transition: all 0.5s ease; }
        .star-message.active { opacity: 1; transform: scale(1); }
        .message-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .message-avatar { width: 40px; height: 40px; border-radius: 50%; overflow: hidden; border: 1px solid #ffed4e; }
        .message-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .message-author { font-weight: bold; color: #ffed4e; }
        .message-text { line-height: 1.5; color: #fff; }
        .close-message { position: absolute; top: 5px; right: 10px; color: #ff6b6b; cursor: pointer; font-size: 1.2rem; }
        footer { text-align: center; padding: 30px 0; margin-top: 40px; color: #a0a0ff; font-size: 0.9rem; border-top: 1px solid rgba(64, 64, 128, 0.3); }
        .shooting-stars { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; overflow: hidden; }
        .shooting-star { position: absolute; width: 2px; height: 2px; background-color: #fff; border-radius: 50%; box-shadow: 0 0 10px 1px #fff; }
        @media (max-width: 768px) { .content { flex-direction: column; } .stars-container { height: 400px; } h1 { font-size: 2.5rem; } }
    </style>
</head>
<body>
    <div class="shooting-stars" id="shooting-stars"></div>
    
    <div class="container">
        <header>
            <h1><i class="fas fa-star"></i> 点亮星空</h1>
            <p class="subtitle">点击星空中的星星，点亮它并留下你的祝福。每颗被点亮的星星都会承载一个美好的愿望。</p>
        </header>
        
        <div class="instructions">
            <h2><i class="fas fa-info-circle"></i> 使用说明</h2>
            <ol>
                <li><strong>点击星星</strong> - 点击星空中的任意一颗星星将其点亮</li>
                <li><strong>输入祝福</strong> - 在右侧表单中输入你的祝福语</li>
                <li><strong>上传头像</strong> - 上传你的头像（或使用默认头像）</li>
                <li><strong>保存祝福</strong> - 点击"点亮这颗星"按钮，你的祝福将显示在星空中</li>
                <li><strong>查看祝福</strong> - 点击已点亮的星星可以查看祝福内容</li>
            </ol>
        </div>
        
        <div class="content">
            <div class="stars-container" id="stars-container">
                <div id="messages-container"></div>
            </div>
            
            <div class="sidebar">
                <div class="form-container">
                    <h2><i class="fas fa-edit"></i> 写下你的祝福</h2>
                    
                    <div class="form-group">
                        <label for="username"><i class="fas fa-user"></i> 你的名字</label>
                        <input type="text" id="username" placeholder="输入你的名字" value="星空旅人">
                    </div>
                    
                    <div class="form-group">
                        <label for="blessing"><i class="fas fa-comment"></i> 祝福语</label>
                        <textarea id="blessing" placeholder="写下你的祝福...">愿这个世界充满和平与爱，愿每个人都能找到属于自己的星星。</textarea>
                    </div>
                    
                    <div class="avatar-container">
                        <label><i class="fas fa-image"></i> 你的头像</label>
                        <div class="avatar-preview" id="avatar-preview">
                            <i class="fas fa-user-astronaut"></i>
                        </div>
                        <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                        <button class="btn" id="upload-btn">
                            <i class="fas fa-cloud-upload-alt"></i> 上传头像
                        </button>
                    </div>
                    
                    <button class="btn" id="light-star-btn">
                        <i class="fas fa-magic"></i> 点亮这颗星
                    </button>
                    
                    <div class="lit-stars-counter">
                        <h3><i class="fas fa-star"></i> 已点亮的星星</h3>
                        <div class="counter" id="star-counter">0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>✨ 每颗被点亮的星星都承载着一个美好的愿望 ✨</p>
            <p>托管于 GitHub Pages | © 2023 点亮星空</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const starsContainer = document.getElementById('stars-container');
            const starCounter = document.getElementById('star-counter');
            const usernameInput = document.getElementById('username');
            const blessingInput = document.getElementById('blessing');
            const avatarPreview = document.getElementById('avatar-preview');
            const avatarUpload = document.getElementById('avatar-upload');
            const uploadBtn = document.getElementById('upload-btn');
            const lightStarBtn = document.getElementById('light-star-btn');
            const messagesContainer = document.getElementById('messages-container');
            const shootingStarsContainer = document.getElementById('shooting-stars');
            
            let stars = [];
            let litStars = 0;
            let selectedStar = null;
            let userAvatar = null;
            
            function initStars() {
                starsContainer.innerHTML = '';
                const starCount = 150;
                stars = [];
                
                for (let i = 0; i < starCount; i++) {
                    createStar();
                }
                
                updateStarCounter();
            }
            
            function createStar() {
                const star = document.createElement('div');
                star.className = 'star';
                
                const x = Math.random() * 95;
                const y = Math.random() * 95;
                
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                
                const size = Math.random() * 3 + 2;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                const brightness = Math.random() * 0.7 + 0.3;
                star.style.opacity = brightness;
                
                const starData = {
                    element: star,
                    x: x,
                    y: y,
                    lit: false,
                    message: null,
                    id: stars.length
                };
                
                stars.push(starData);
                
                star.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    if (starData.lit && starData.message) {
                        showMessage(starData);
                        return;
                    }
                    
                    selectStar(starData);
                });
                
                starsContainer.appendChild(star);
            }
            
            function selectStar(starData) {
                if (selectedStar) {
                    selectedStar.element.classList.remove('lit');
                }
                
                selectedStar = starData;
                selectedStar.element.classList.add('lit');
                
                if (!selectedStar.lit) {
                    showFormHint();
                }
            }
            
            function showFormHint() {
                lightStarBtn.innerHTML = '<i class="fas fa-magic"></i> 点亮这颗星';
                lightStarBtn.style.background = 'linear-gradient(90deg, #6ee7ff, #3b82f6)';
            }
            
            function lightStar() {
                if (!selectedStar) {
                    alert('请先选择一颗星星！');
                    return;
                }
                
                const username = usernameInput.value.trim() || '匿名';
                const blessing = blessingInput.value.trim() || '愿世界和平！';
                
                if (!blessing) {
                    alert('请输入祝福语！');
                    return;
                }
                
                selectedStar.lit = true;
                selectedStar.message = {
                    username: username,
                    blessing: blessing,
                    avatar: userAvatar || 'default'
                };
                
                litStars++;
                updateStarCounter();
                createStarMessage(selectedStar);
                
                blessingInput.value = '';
                
                lightStarBtn.innerHTML = '<i class="fas fa-check"></i> 点亮成功！';
                lightStarBtn.style.background = 'linear-gradient(90deg, #4ade80, #22c55e)';
                
                setTimeout(() => {
                    lightStarBtn.innerHTML = '<i class="fas fa-magic"></i> 点亮这颗星';
                    lightStarBtn.style.background = 'linear-gradient(90deg, #6ee7ff, #3b82f6)';
                }, 2000);
                
                createStar();
            }
            
            function createStarMessage(starData) {
                const message = document.createElement('div');
                message.className = 'star-message';
                message.id = `message-${starData.id}`;
                
                let left = starData.x;
                let top = starData.y + 5;
                
                if (left > 70) left -= 30;
                if (top > 80) top -= 20;
                
                message.style.left = `${left}%`;
                message.style.top = `${top}%`;
                
                let avatarHTML = '';
                if (starData.message.avatar === 'default') {
                    avatarHTML = '<i class="fas fa-user-astronaut"></i>';
                } else {
                    avatarHTML = `<img src="${starData.message.avatar}" alt="${starData.message.username}">`;
                }
                
                message.innerHTML = `
                    <div class="close-message">&times;</div>
                    <div class="message-header">
                        <div class="message-avatar">${avatarHTML}</div>
                        <div class="message-author">${starData.message.username}</div>
                    </div>
                    <div class="message-text">${starData.message.blessing}</div>
                `;
                
                messagesContainer.appendChild(message);
                
                const closeBtn = message.querySelector('.close-message');
                closeBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    hideMessage(message);
                });
                
                setTimeout(() => {
                    message.classList.add('active');
                }, 100);
                
                setTimeout(() => {
                    if (message.classList.contains('active')) {
                        hideMessage(message);
                    }
                }, 8000);
            }
            
            function showMessage(starData) {
                const message = document.getElementById(`message-${starData.id}`);
                if (message) {
                    document.querySelectorAll('.star-message.active').forEach(msg => {
                        if (msg !== message) {
                            hideMessage(msg);
                        }
                    });
                    
                    message.classList.add('active');
                    
                    setTimeout(() => {
                        if (message.classList.contains('active')) {
                            hideMessage(message);
                        }
                    }, 8000);
                }
            }
            
            function hideMessage(message) {
                message.classList.remove('active');
            }
            
            function updateStarCounter() {
                starCounter.textContent = litStars;
            }
            
            uploadBtn.addEventListener('click', function() {
                avatarUpload.click();
            });
            
            avatarUpload.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        userAvatar = e.target.result;
                        avatarPreview.innerHTML = `<img src="${userAvatar}" alt="用户头像">`;
                    };
                    
                    reader.readAsDataURL(file);
                }
            });
            
            lightStarBtn.addEventListener('click', lightStar);
            
            starsContainer.addEventListener('click', function(e) {
                if (e.target === starsContainer) {
                    document.querySelectorAll('.star-message.active').forEach(msg => {
                        hideMessage(msg);
                    });
                }
            });
            
            function createShootingStars() {
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        createShootingStar();
                    }, i * 2000);
                }
                
                setInterval(createShootingStar, 2000);
            }
            
            function createShootingStar() {
                const star = document.createElement('div');
                star.className = 'shooting-star';
                
                const startX = Math.random() * 100;
                star.style.left = `${startX}%`;
                star.style.top = `-10px`;
                
                const length = Math.random() * 100 + 50;
                const duration = Math.random() * 1 + 0.5;
                
                star.style.width = `${length}px`;
                star.style.height = '1px';
                star.style.transform = `rotate(${Math.random() * 30 - 15}deg)`;
                
                shootingStarsContainer.appendChild(star);
                
                const animation = star.animate([
                    { top: '-10px', opacity: 0 },
                    { top: '10%', opacity: 1 },
                    { top: '100%', opacity: 0 }
                ], {
                    duration: duration * 1000,
                    easing: 'linear'
                });
                
                animation.onfinish = () => {
                    star.remove();
                };
            }
            
            initStars();
            createShootingStars();
            
            setTimeout(() => {
                const sampleMessages = [
                    { username: "星辰", blessing: "愿每个人都能找到生命中的光", avatar: "default" },
                    { username: "夜空守望者", blessing: "希望世界和平，没有战争", avatar: "default" },
                    { username: "梦想家", blessing: "愿所有梦想都能成真", avatar: "default" },
                    { username: "旅行者", blessing: "探索未知，永远保持好奇心", avatar: "default" }
                ];
                
                for (let i = 0; i < 4; i++) {
                    const randomStar = stars[Math.floor(Math.random() * stars.length)];
                    if (!randomStar.lit) {
                        randomStar.lit = true;
                        randomStar.message = sampleMessages[i];
                        litStars++;
                        createStarMessage(randomStar);
                    }
                }
                
                updateStarCounter();
            }, 1000);
        });
    </script>
</body>
</html>